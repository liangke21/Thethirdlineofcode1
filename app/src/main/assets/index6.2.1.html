<!doctype html>

<title>CodeMirror: C-like mode</title>
<meta charset="utf-8"/>
<link rel=stylesheet href="rely/docs.css">                                       
<link rel="stylesheet" href="rely/codemirror.css">

<link rel="stylesheet" href="rely/idea.css">                                             <!-- 主题背景 -->

<script src="rely/codemirror.js"></script>
<script src="rely//matchbrackets.js"></script>
<link rel="stylesheet" href="rely/show-hint.css">
<script src="rely/show-hint.js"></script>
<script src="rely/clike.js"></script>
<style>.CodeMirror {border: 2px inset #dee;}</style>

<h2>动态注册监听时间变化</h2>

<div><textarea id="kotlin-code">
package com.example.broadcasttest

import android.content.BroadcastReceiver
import android.content.Context
import android.content.Intent
import android.content.IntentFilter
import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.widget.Toast

class MainActivity : AppCompatActivity() {
    lateinit var timeChangReceiver:TimeChangeReceiver//定义
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        val intFilter= IntentFilter()
        intFilter.addAction("android.intent.action.TIME_TICK")//实现了监听系统的时间
        timeChangReceiver=TimeChangeReceiver()//实例化
        registerReceiver(timeChangReceiver,intFilter)
        //需要等一分钟才广播
    }

    inner class TimeChangeReceiver:BroadcastReceiver(){

        override fun onReceive(context: Context?, intent: Intent?) {
            Toast.makeText(context,"你好呀",Toast.LENGTH_SHORT).show()
        }
    }

}
</textarea></div>
<script>
      var kotlinEditor = CodeMirror.fromTextArea(document.getElementById("kotlin-code"), {
          lineNumbers: true,
          matchBrackets: true,
		  theme: "idea",       <!-- 主题背景 -->
          mode: "text/x-kotlin"
      });


      var mac = CodeMirror.keyMap.default == CodeMirror.keyMap.macDefault;
      CodeMirror.keyMap.default[(mac ? "Cmd" : "Ctrl") + "-Space"] = "autocomplete";
    </script>


